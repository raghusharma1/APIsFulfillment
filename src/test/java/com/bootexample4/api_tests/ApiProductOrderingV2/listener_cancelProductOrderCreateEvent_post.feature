# ********RoostGPT********

# Test generated by RoostGPT for test sampleArtilleryEnv2 using AI Type  and AI Model 
# 
# Feature file generated for /listener/cancelProductOrderCreateEvent_post for http method type POST 
# RoostTestHash=7601d79448
# 
# 

# ********RoostGPT********
Feature: Cancel Product Order Create Event By Client

  Background:
    * def urlBase = karate.properties['nnnn_URL_BASE'] || karate.get('urlBase', 'http://localhost:4010')
    * configure headers = { Authorization: #(karate.properties['nnnn_AUTH_TOKEN']) }
    * url urlBase

  Scenario Outline: Verify successful cancellation of product order creation event
    Given path '/listener/cancelProductOrderCreateEvent'
    And request 
    """
    <requestBody>
    """
    When method POST
    Then status 204
    And match responseHeaders['Content-Type'][0] == 'application/json'
    And match response == '#null'

    Examples:
      | requestBody |
      | """
        {
          "notification": {
            "date": "2023-03-15T00:00:01Z",
            "customer": {
              "subscriberId": "1234567890"
            },
            "order": {
              "id": "20230315000001",
              "associatedDocument": "VTT001",
              "description": "Ordem encerrada com sucesso"
            },
            "issue": {
              "action": "fechar",
              "code": {
                "code": 7001
              },
              "description": {
                "description": "Pendência Cancelamento por Duplicidade"
              },
              "fieldActivity": "True",
              "observation": "Observação relevante",
              "reason": "Motivo da pendência de uma OS",
              "task": "Tarefa pendente",
              "type": "CLIENTE",
              "updateDate": "2023-03-15T00:00:01Z"
            },
            "lostEquipment": "False",
            "resource": {
              "devices": {
                "device": [
                  {
                    "category": "CAT1",
                    "description": "Descrição do recurso",
                    "resourceCharacteristic": [
                      {
                        "name": "Descrição do item",
                        "value": "Valor do item"
                      }
                    ],
                    "startOperatingDate": "2023-03-15T00:00:01Z",
                    "state": "ativo",
                    "type": "Tipo de recurso",
                    "usageState": "em uso"
                  }
                ],
                "fiberPath": {
                  "item": [
                    {
                      "name": "Descrição do item",
                      "value": "Valor do item"
                    }
                  ]
                },
                "gponAccess": "GPON123456"
              }
            },
            "type": "Processo normal"
          }
        }
        """ |

  Scenario Outline: Verify cancellation of product order creation event with bad request
    Given path '/listener/cancelProductOrderCreateEvent'
    And request 
    """
    <requestBody>
    """
    When method POST
    Then status 400
    And match response == '#object'
    And match response.message == '#string'

    Examples:
      | requestBody |
      | """
        {
          "notification": {
            "date": "invalid-date",
            "customer": {
              "subscriberId": "1234567890"
            },
            "order": {
              "id": "20230315000001",
              "associatedDocument": "VTT001",
              "description": "Descrição inválida"
            },
            "issue": {
              "action": "abrir",
              "code": {
                "code": 9999
              },
              "description": {
                "description": "Descrição inválida"
              },
              "fieldActivity": "Maybe",
              "observation": "Observação inválida",
              "reason": "Motivo inválido",
              "task": "Tarefa inválida",
              "type": "INEXISTENTE",
              "updateDate": "invalid-date"
            },
            "lostEquipment": "Maybe",
            "resource": {
              "devices": {
                "device": [
                  {
                    "category": "CATX",
                    "description": "Descrição inválida",
                    "resourceCharacteristic": [
                      {
                        "name": "Item inválido",
                        "value": "Valor inválido"
                      }
                    ],
                    "startOperatingDate": "invalid-date",
                    "state": "estado inválido",
                    "type": "Tipo inválido",
                    "usageState": "estado de uso inválido"
                  }
                ],
                "fiberPath": {
                  "item": [
                    {
                      "name": "Item inválido",
                      "value": "Valor inválido"
                    }
                  ]
                },
                "gponAccess": "GPONInvalido"
              }
            },
            "type": "Processo inválido"
          }
        }
        """ |
